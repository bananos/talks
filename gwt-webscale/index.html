<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

	<head>
		<meta charset="utf-8">

		<title>GWT is a webscale</title>

		<meta name="description" content="Using GWT in a largescale environment">
		<meta name="author" content="Andrew Druchenko">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- For highlight.js -->
		<!--<link rel="stylesheet" href="lib/css/zenburn.css">-->
		<link rel="stylesheet" href="lib/css/default.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!--

            http://webapp.org.ua/dev/why-gwt/

			1. Проблема масштабных приложений на javascript
			   - определение масштабности (~ 150 000 LOC, ~ 1000 классов)
			   - проблемы яваскрипта как языка
			   - построение десктопного приложения в браузере
			   - дебаг (Firebug, IE Dev tools, Chrome developer tools)
			   - упаковщики/оптимизаторы/обфускаторы UI Compressor, Closure Compiler, JSMin,
			   - фреймворки / уровни абстракции (jQuery, jQuery UI, YUI Library, SproutCore, Javascript MVC, Cappuccino, PersistenceJS, etc.)


            2. Инструменты и решения
               - Как мы выбирали: матрица критериев

               - обзор существующих фреймворков (Dart)
                (http://www.infoq.com/research/js-frameworks-compile)

               - Сравнение с тем что было в 2009гг
                (file://localhost/Users/bananos/Desktop/cs-frameworks-evaluation.html)

               - Серия слайдов "GWT vs. framework X" (накозлить сравнения Лебедевской рекламы в жжешечке)

            3. GWT overview
              - MVP frameworks (mvp4g) / EventBus
              - Code-splitting
              - Модульность
              - Кросс-браузерность / deffered binding
              - Оптимизация / обфускация
              - Декларативные интерфейсы UiBinder
              - ClientBundle / иньекция css/images/data в документ
              - Любой 3rd party яваскрипт прикручивается
              - Дебаггинг - super dev mode, symbol maps


            4. Цистерна дёгтя
              - Dev-mode / тормоза
              - Все недостатки Java
              - Многое заточено под явский бэкенд (GWT-RPC, shared модели данных -- идут в трубу)
              - Не сильно много opensource либ
              - Пересадить фронт-енда на Яву будет тяжеловато (слайд из HTTP status Cats с котом над ванной воды)


            5. Немного наших фактов
              - Обьем проекта в LOC
              - Кол-во модулей
              - Результирующий обьем кода (запакованный/ незапакованный)
              - График скорости разработки / сложности (Simple made easy)
              - Кол-во разработчиков
              - О проблеме незнания явы
              - О тестах

            6. Выводы
              - Космолеты vs. Велосипеды
              - Специфика проекта (startup / enterprise)
              - Серебрянных пуль нету

			-->


			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

            <section>
                <h1>GWT&nbsp;is&nbsp;web&nbsp;scale!</h1>
                <br/>
                <p>
                    <img src="imgs/gwt-logo.png" style="float:left;margin-right: 50px;"/>
                    <h3>Или как использовать GWT в&nbsp;крупномасштабной <nobr>js-разработке</nobr> если вам&nbsp;не&nbsp;нравится Java</h3>
                </p>

                <br style="clear:both;"/>

                <p>
                    <a href="http://kharkivjs.com">Kharkiv JS</a>, &nbsp;15/Dec/2012
                </p>

                <p>
                    <a href="http://webapp.org.ua/about">Andrew Druchenko</a> /
                    <a href="http://twitter.com/bananoz">@bananoz</a>
                </p>
            </section>


            <!-- Part 1: Intro -->
            <section>

                <section>
                    <h1>Масштабные приложения на javascript</h1>
                </section>

                <section>
                    <h2>Что значит &laquo;масштабность&raquo; ? </h2>
                    <br/>
                    <ul>
                        <li><h3> ~ 150 000 строк кода (LOC)</h3></li>
                        <li><h3> ~ 1000 классов</h3></li>
                    </ul>

                </section>

                <section>
                    <h2>Браузер превращается в OC</h2>
                    <br/>

                    <ul>
                        <li><h3>Web Page &rarr; RIA</h3></li>
                        <li><h3>&laquo;Одностраничность&raquo;</h3></li>
                        <li><h3>Почти десктопное приложение</h3></li>
                    </ul>
                </section>


                <section style="width: 1200px;margin-left:-100px;">
                    <h2>Отладка</h2>

                    <table>
                        <tr>

                            <td>
                                <img src="imgs/blya.png" style="float:left; width:400px;"/>
                            </td>

                            <td style="vertical-align: middle;">

                                <ul>
                                    <li><h3>У каждого браузера свои средства</h3></li>
                                    <li><h3>Потеря времени на&nbsp;тривиальных&nbsp;ошибках</h3></li>
                                    <li><h3>IE must die!</h3></li>
                                </ul>

                            </td>
                        </tr>
                    </table>
                </section>

                <section>
                    <h2>Проблемы языка</h2>
                    <br/>
                    <ul>
                        <li><h3>No package mechanism</h3></li>
                        <li><h3>Global namespace</h3></li>
                        <li><h3>Octal integer literals</h3></li>
                        <li><h3>Weirdness initializing arrays</h3></li>
                    </ul>

                    <br/>
                    <br/>
                    <small>Подробности на <a href="http://wtfjs.com/">wtfjs.com</a> и
                        <a href="http://c2.com/cgi/wiki?JavaScriptFlaws">Ward Cunningham</a>
                    </small>
                </section>

                <section>
                    <h2>Экосистема</h2>
                    <br/>
                    <ul>
                        <li><h3>Оптимизаторы, обфускаторы (Closure,&nbsp;JSMin,&nbsp;YUI compressor)</h3></li>
                        <li><h3>Фреймворки (Backbone, Ember, Spine, Knockout, JavascriptMVC)</h3></li>
                        <li><h3>Прочие уровни абстракции (jQuery, Persistence.js, )</h3></li>
                    </ul>

                    <br/>
                    <br/>
                    <small> Аж глаза разбегаются!
                    </small>

                </section>

            </section>


            <!-- Part 2 -->
            <section>

                <section>
                    <h1>Решения?</h1>
                </section>


                <section>
                    <h2>Как мы выбирали</h2>
                    <br/>
                    <ul>
                        <li><h4>Архитектура MVC/MVP</h4></li>
                        <li><h4>Custom widgets / easy redesign</h4></li>
                        <li><h4>i18n/l10n</h4></li>
                        <li><h4>Система сборки/упаковки</h4></li>
                        <li><h4>Кроссбраузерность</h4></li>
                        <li><h4>Документация</h4></li>
                        <li><h4>Community support</h4></li>
                        <li><h4>Unit testing</h4></li>
                    </ul>

                </section>


                <section>
                    <h2>2009 год</h2>
                    <br/>
                    <h3>Вроде бы вариантов масса? </h3>

                </section>


                <section style="width: 1200px;">
                    <h2><a href="http://sproutcore.com">SproutCore</a></h2>

                    <table>
                        <tr>

                            <td>
                                <img src="imgs/sproutcore.jpeg" style="float:left; width:218px;"/>
                            </td>

                            <td style="vertical-align: middle;padding-left:50px;">
                                <ul>
                                    <li><h3>Все заточено под Apple look&amp;feel</h3></li>
                                    <li><h3>Билд-система на Ruby</h3></li>
                                    <li><h3>Проблемы с документацией</h3></li>
                                    <li><h3>Демки не работали в IE</h3></li>
                                </ul>

                            </td>
                        </tr>
                    </table>
                </section>


                <section style="width: 1200px;margin-left:-100px;">
                    <h2><a href="http://cappuccino.org">Cappucino</a></h2>

                    <table>
                        <tr>

                            <td>
                                <img src="imgs/cappuccino.png" style="float:left; width:400px;"/>
                            </td>

                            <td style="vertical-align: middle;">
                                <ul>
                                    <li><h3>Objective-J?  WTF?? </h3></li>
                                    <li><h3>Нету i18n/l10n</h3></li>
                                    <li><h3>Проблемы с документацией</h3></li>
                                    <li><h3>Нету встроенных средств тестирования</h3></li>
                                    <li><h3>Фреймворк &laquo;одного приложения&raquo;</h3></li>
                                </ul>

                            </td>
                        </tr>
                    </table>
                </section>

                <section>
                    <h2><a href="http://javascriptmvc.com/">Javascript MVC</a></h2>

                    <h3>&mdash; тонны всего в одной кучe</h3>

                    <br/>
                    <img src="imgs/javascriptmvc.png" style="width:258px;"/>
                    <br/>
                </section>


                <section>
                    <h2>YUI, ExtJS, Dojo, jQuery UI</h2>

                    <br/>
                    <br/>
                    <h3 style="text-align:left;">&mdash; MVC/MVP ?</h3>
                    <h3 style="text-align:left;">&mdash; Неа, не слышали</h3>

                   <br/>
                    <br/>

                    <small>Грустное наследие библиотеки виджетов</small>
                </section>


                <section>

                    <h2>Картина сегодня</h2>
                    <br/>
                    <br/>

                    <table style="width:100%;">
                        <tr>
                            <td style="vertical-align: top;">
                                <ul>
                                    <li><h4>18% <a href="http://angularjs.org/">AngularJS</a></h4></li>
                                    <li><h4>17% <a href="https://developers.google.com/web-toolkit/">GWT</a></h4></li>
                                    <li><h4>15% <a href="http://backbonejs.org">backbone.js</a></h4></li>
                                    <li><h4>12% <a href="http://coffeescript.org/">CoffeeScript</a></h4></li>
                                    <li><h4>10% свои велосипеды</h4></li>
                                </ul>
                            </td>


                            <td style="vertical-align: top;">
                                <ul>
                                    <li><h4>8%  <a href="http://knockoutjs.com">Knockout.js</a></h4></li>
                                    <li><h4>6%  <a href="http://www.dartlang.org">Dart</a></h4></li>
                                    <li><h4>4%  <a href="https://github.com/clojure/clojurescript">ClojureScript</a></h4></li>
                                    <li><h4>10%  хипстеры-маргиналы</h4></li>
                                </ul>

                            </td>
                        </tr>

                    </table>

                    <br/>
                    <small>
                        По результам <a href="http://www.infoq.com/research/js-frameworks-compile">опроса на
                        InfoQ.com</a>
                    </small>
                </section>



            </section>


            <!-- 3. GWT overview -->


            <section>

                <section>
                    <img src="imgs/superman-gwt.jpg" style="">
                </section>

                <section>
                    <h1>Google Web Toolkit</h1>

                    <p> Заглянем внутрь</p>
                </section>

                <section>

                    <h2>Java 1.6+</h2>
                    <ul>
                        <li><h3>Все плюсы</h3></li>
                        <li><h3>&hellip; и минусы</h3></li>
                    </ul>

                </section>

                <section>
                    <h2>Архитектура MVP</h2>
                    <ul>
                        <li><h3><a href="code.google.com/p/mvp4g/">mvp4g</a></h3></li>
                        <li><h3>Начиная с 2.2 &mdash; из коробки</h3></li>
                    </ul>
                </section>

                <section>
                    <h2>Модульность</h2>
                    <ul>
                        <li><h3>Проекты (отдельное single-page приложение)</h3></li>
                        <li><h3>Библиотеки (обычные jar файлы)</h3></li>
                        <li><h3>Модули (понятие уровня фреймворка)</h3></li>
                        <li><h3>Шины сообщений (общая, модульная)</h3></li>
                        <li><h3>Сode-splitting (загрузка по частям)</h3></li>
                    </ul>
                </section>


                <section style="width:1200px;margin-left:-100px;">
                    <h2>Декларативные интерфейсы</h2>
                    <h4>Псевдо HTML / ContactView.ui.xml</h4>

                    <pre><code contenteditable>
&lt;ui:UiBinder xmlns:ui=&quot;urn:ui:com.google.gwt.uibinder&quot;<br/>             xmlns:g=&quot;urn:import:com.google.gwt.user.client.ui&quot;&gt;<br/><br/>    &lt;g:HTMLPanel&gt;<br/>        &lt;w:LoadingStateWidget ui:field=&quot;loadingStateWidget&quot; visible=&quot;false&quot;/&gt;<br/><br/>        &lt;ul&gt;<br/>            &lt;li&gt;&lt;span&gt;One&lt;/span&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;span&gt;Two&lt;/span&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;span&gt;Three&lt;/span&gt;&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>    &lt;/g:HTMLPanel&gt;<br/><br/>&lt;/ui:UiBinder&gt;
                    </code></pre>

                </section>


                <section style="width:1200px;margin-left:-100px;">
                    <h2>Декларативные интерфейсы</h2>
                    <h4>Доступ из Java-кода</h4>
 <pre><code contenteditable style="max-height: 550px !important;">public class ContactView extends BaseView implements IContactView {

 @UiTemplate("ContactView.ui.xml")
 interface Binder extends UiBinder&lt;FlowPanel, ContactView&gt; {
 }

 private static final Binder binder = GWT.create(Binder.class);
 @UiField LoadingStateWidget loadingStateWidget;

 @Override
 protected Widget createWidget() {
    FlowPanel widget = binder.createAndBindUi(this);
 }

 @Override
 public void setBusy(boolean isBusy) {
    loadingStateWidget.setVisible(isBusy)
 }
}
</code></pre>
                </section>

                <section>

                    <h2>ClientBundle</h2>

                    <ul>
                        <li><h3>Инлайновый CSS</h3></li>
                        <li><h3>Cпрайты</h3></li>
                        <li><h3>Любые данные</h3></li>

                    </ul>

                </section>

                <section>
                    <h2>Deffered binding</h2>
                    <ul>
                        <li><h3>GWT подход для кросс-браузерности</h3></li>
                        <li><h3>Отдельная пермутация для каждого браузера</h3></li>
                        <li><h3>Реализовано через Java интерфейсы</h3></li>
                    </ul>
                </section>


                <section>
                    <h2>Javascript всегда в силе!</h2>
                    <ul>
                        <li><h3>JSNI</h3></li>
                        <li><h3>Вызовы в обе стороны</h3></li>
                        <li><h3>Порядок загрузки нас не парит</h3></li>
                    </ul>
                </section>


                <section>
                    <h2>Трушный Java-debug</h2>
                    <ul>
                        <li><h3>Полные стэктрейсы в ява-код</h3></li>
                        <li><h3>Символьная информация в продакшн-билдах</h3></li>
                        <li><h3><a href="https://developers.google.com/web-toolkit/articles/superdevmode">Java stacktraces / super dev mode</a></h3></li>
                        <li><h3>Все плюшки прямо из Eclipse</h3></li>
                    </ul>
                </section>


                <section>
                    <h2>GWT Compiler</h2>
                    <ul>
                        <li><h3>Оптимизация кода</h3></li>
                        <li><h3>Обфускация</h3></li>
                        <li><h3>Сжатие</h3></li>
                        <li><h3>Разбивка (code splitting)</h3></li>
                        <li><h3>ant build</h3></li>
                    </ul>
                </section>

            </section>

            <!--4. Цистерна дёгтя -->
            <section>

                <section>
                    <h1>Неужели GWT решит все мои проблемы?</h1>
                </section>

                <section>
                    <h2>Цистерна дёгтя</h2>
                    <img src="imgs/bue.jpg" style="">
                </section>

                <section>
                    <h2>Development mode</h2>
                    <ul>
                        <li><h3>Требует плагина под каждый браузер</h3></li>
                        <li><h3>Тормоза</h3></li>
                        <li><h3>Тормоза</h3></li>
                        <li><h3>Тормоза</h3></li>
                    </ul>
                </section>

                <section>
                    <h2>Все недостатки Java</h2>
                    <ul>
                        <li><h3>В разы больше кода</h3></li>
                        <li><h3>Строгая типизация</h3></li>
                        <li><h3>Тонны анонимных интерфейсов</h3></li>
                    </ul>
                </section>

                <section>
                    <h2>Заточено под Java backend</h2>
                    <ul>
                        <li><h3>Shared модели данных</h3></li>
                        <li><h3>GWT-RPC</h3></li>
                        <li><h3>RequestFactory</h3></li>
                    </ul>
                </section>

                <section>
                    <h2>Много ли opensource?</h2>
                    <ul>
                        <li><h3>gwtQuery</h3></li>
                        <li><h3>gwt-log</h3></li>
                        <li><h3>&hellip;</h3></li>
                    </ul>
                    <p>
                    <small>Увы, немного&nbsp;&mdash; но всегда можно портировать </small>
                    </p>
                </section>


                <section>
                    <h2>Пересадить с JS на  Java? </h2>
                    <img src="imgs/cat_not_acceptable.png" style="width:510px;"/>

                    <p>
                        <small>&mdash;&nbsp;Вы шутите, да? </small>
                    </p>
                </section>



             </section>


            <!--5. Немного наших фактов -->
            <section>

                <section>
                    <h1>Немного наших фактов</h1>
                </section>

                <section>
                    <h2>Кто такие &laquo;мы&raquo;?</h2>
                    <ul>
                        <li><h3><a href="http://nimble.com">nimble.com</a></h3></li>
                        <li><h3>Cоциальная CRM</h3></li>
                        <li><h3>Контакты, Email, Календарь</h3></li>
                    </ul>

                    <img src="imgs/nimble_logo.png" style="300px;"/>
                </section>


                <section>
                    <h2>Обьем проекта</h2>
                    <ul>
                        <li><h3>~ 168 KLOC чистый java код</h3></li>
                        <li><h3>~ 55 KLOC комментарии </h3></li>
                        <li><h3>~ 1000 файлов</h3></li>
                        <li><h3>~ 10 KLOC разметка </h3></li>
                        <li><h3>~ 12 KLOC стили </h3></li>
                    </ul>

                </section>


                <section>
                    <h2>10 Модулей</h2>
                    <ul>
                        <li><h3>Контакты</h3></li>
                        <li><h3>Сообщения</h3></li>
                        <li><h3>Настройки</h3></li>
                        <li><h3>Социалка</h3></li>
                        <li><h3>Прочие служебные</h3></li>
                    </ul>

                </section>

                <section>
                    <h2>Результирующий обьем кода</h2>

                    <p>Весь код в 11-ти файлах + 1 bootstrap</p>

                    <h3>Непакованный</h3>
                    <ul>
                        <li>Дебаг&nbsp;&mdash; 70Mb </li>
                        <li>Продакшн&nbsp;&mdash; 4.6Mb</li>
                    </ul>

                    <br/><br/>

                    <h3>Запакованный</h3>
                    <ul>
                        <li>2.2Mb с картинками и стилями</li>
                    </ul>

                </section>

                <!-- 5. Немного наших фактов -->
                <section>
                    <h2>Скорость разработки </h2>

                    <h3>Easy</h3>
                    <img src="imgs/easy.png" style="width: 1000px"/>

                </section>

                <section>
                    <h2>Скорость разработки </h2>

                    <h3>Simple</h3>
                    <img src="imgs/simple.png" style="width: 1000px"/>

                </section>


                <section>
                    <h2>Прочее</h2>
                    <ul>
                        <li><h3>[2,6] разработчиков</h3></li>
                        <li><h3>Билд идет 15 минут</h3></li>
                        <li><h3>Много RAM и только SSD</h3></li>
                        <li><h3>Простая Java когда бэкенд чужой</h3></li>
                        <li><h3>Тесты были, но пропали&nbsp;&mdash; последствий не замечено</h3></li>
                    </ul>

                </section>

            </section>


            <!-- 6. Выводы -->

            <!-- 6. Выводы
            - Космолеты vs. Велосипеды
            - Специфика проекта (startup / enterprise)
            - Серебрянных пуль нету
-->

            <section>

                <section>
                    <h1>Выводы</h1>
                </section>

                <section>
                    <h2>Космолеты vs. Велосипеды</h2>
                    <img src="imgs/gwt_vs_backbone.jpg" style="width:1000px;"/>
                </section>

                <section>
                    <h2>Startup / Enterprise ?</h2>
                    <img src="imgs/skyscraper.png" style="width:1000px;"/>
                </section>

                <section>
                    <h2>Серебрянных пуль нету</h2>
                    <img src="imgs/waltzing_with_bear.png" style="width:525px;"/>
                </section>

                <section>
                    <h1>Вопросы?</h1>
                    <h2><a href="http://webapp.org.ua/about">Andrew Druchenko</a></h2>
                    <h2><a href="http://twitter.com/bananoz">@bananoz</a></h2>
                </section>


            </section>


			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				//theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				theme : 'simple',
				//transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none
				transition: 'default',
				
				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				    //{ src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
